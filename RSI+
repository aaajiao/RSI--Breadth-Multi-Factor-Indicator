//@version=5
indicator("RSI+Breadth Multi-Factor", overlay=true, max_labels_count=500)

//========================
// Mode (ËØÑÂàÜÈòàÂÄºË∞ÉÊï¥)
//========================
grpMode = "Mode"
mode = input.string("Standard", "‰ø°Âè∑Ê®°Âºè", options=["Aggressive","Standard","Conservative"], group=grpMode)

//========================
// Core Inputs
//========================
grp1 = "Core Settings"
rsiLen = input.int(14, "RSI Length", minval=2, group=grp1)

// Ëá™Âä®Ëé∑ÂèñÂõæË°®Âë®ÊúüÔºåÊó†ÈúÄÊâãÂä®ÈÄâÊã©
tfData = timeframe.period  // Ëá™Âä®Ëé∑ÂèñÂΩìÂâçÂõæË°®Âë®Êúü

// Ëá™Âä®Ê£ÄÊµãÊó•ÂÜÖÊ®°Âºè: ‰ΩøÁî®ÂÜÖÁΩÆÂèòÈáè timeframe.isintraday
intradayMode = timeframe.isintraday  // Ëá™Âä®: Êó•ÂÜÖÂõæË°® = true, Êó•Á∫ø/Âë®Á∫ø = false

grp2 = "Signal Thresholds"
// ‰ø°Âè∑Ëß¶ÂèëÈòàÂÄº
strongBotThreshold = input.int(6, "Strong Bottom Threshold", minval=3, maxval=10, group=grp2)
botThreshold = input.int(4, "Â∫ïÈÉ®‰ø°Âè∑ÈòàÂÄº", minval=2, maxval=8, group=grp2)
topThreshold = input.int(-4, "È°∂ÈÉ®‰ø°Âè∑ÈòàÂÄº", minval=-8, maxval=-2, group=grp2)
strongTopThreshold = input.int(-6, "Âº∫È°∂ÈÉ®‰ø°Âè∑ÈòàÂÄº", minval=-10, maxval=-3, group=grp2)

grp3 = "Signal Logic"
cooldownIn = input.int(10, "ÂêåÂêë‰ø°Âè∑ÂÜ∑Âç¥bars", minval=0, group=grp3)
confirmBars = input.int(3, "ÂÖ±ÊåØÁ™óÂè£bars", minval=0, group=grp3)
minAgree = input.int(2, "ÂÖ±ÊåØÊúÄÂ∞ëÂ∏ÇÂú∫Êï∞(3ÈÄâN)", minval=1, maxval=3, group=grp3)

grp5 = "Symbols"
spySym = input.symbol("AMEX:SPY", "SPY", group=grp5)
qqqSym = input.symbol("NASDAQ:QQQ", "QQQ", group=grp5)
iwmSym = input.symbol("AMEX:IWM", "Russell2000 (IWM)", group=grp5)

// Breadth symbols
s5twSym = input.symbol("INDEX:S5TW", "S5TW (% > 20D MA)", group=grp5)
s5fiSym = input.symbol("INDEX:S5FI", "S5FI (% > 50D MA)", group=grp5)
nctwSym = input.symbol("INDEX:NCTW", "NCTW (% > 20D MA)", group=grp5)
ncfiSym = input.symbol("INDEX:NCFI", "NCFI (% > 50D MA)", group=grp5)
r2twSym = input.symbol("INDEX:R2TW", "R2TW (% > 20D MA)", group=grp5)
r2fiSym = input.symbol("INDEX:R2FI", "R2FI (% > 50D MA)", group=grp5)

// Up/Down Volume (Êñ∞Â¢û)
grp5b = "Volume Breadth (Êñ∞Â¢û)"
uvolSym = input.symbol("USI:UVOL", "Up Volume (NYSE - SPY/IWM)", group=grp5b)
dvolSym = input.symbol("USI:DVOL", "Down Volume (NYSE - SPY/IWM)", group=grp5b)
uvolqSym = input.symbol("USI:UVOLQ", "Up Volume (NASDAQ - QQQ)", group=grp5b)
dvolqSym = input.symbol("USI:DVOLQ", "Down Volume (NASDAQ - QQQ)", group=grp5b)

grp6 = "Plot"
plotMode = input.string("AUTO", "ÊòæÁ§∫Ê®°Âºè", options=["AUTO","SPY","QQQ","IWM","AGG(ÂÖ±ÊåØ)"], group=grp6)
showDashboard = input.bool(true, "ÊòæÁ§∫ËØÑÂàÜÈù¢Êùø", group=grp6)

//========================
// Mode presets (ËØÑÂàÜÈòàÂÄºË∞ÉÊï¥)
//========================
// ‰∏çÂêåÊ®°ÂºèË∞ÉÊï¥‰ø°Âè∑ÈòàÂÄºÊïèÊÑüÂ∫¶
modeAdjust = mode == "Aggressive" ? 1 : mode == "Conservative" ? -1 : 0

// Êó•ÂÜÖÊ®°ÂºèÈòàÂÄºÈôç‰Ωé (Âè™ÊúâRSI+Vol‰∏§Âõ†Â≠ê, ÊúÄÂ§ßÂàÜÊï∞¬±4)
intradayAdjust = intradayMode ? 2 : 0
adjBotThreshold = botThreshold - modeAdjust - intradayAdjust
adjStrongBotThreshold = strongBotThreshold - modeAdjust - intradayAdjust
adjTopThreshold = topThreshold + modeAdjust + intradayAdjust
adjStrongTopThreshold = strongTopThreshold + modeAdjust + intradayAdjust

cooldownBars = mode == "Aggressive" ? 5 : mode == "Conservative" ? 15 : cooldownIn

//========================
// Helpers
//========================
// ‰ª∑Ê†ºÊï∞ÊçÆÁî®ÂõæË°®Âë®Êúü
f_sec(_sym, _expr) =>
    request.security(_sym, tfData, _expr, barmerge.gaps_off, barmerge.lookahead_off)

f_ohlc(_sym) =>
    request.security(_sym, tfData, [open, high, low, close], barmerge.gaps_off, barmerge.lookahead_off)

// ÂπøÂ∫¶Êï∞ÊçÆÂßãÁªàÁî®Êó•Á∫ø (breadth indicators only have daily data)
f_secDaily(_sym, _expr) =>
    request.security(_sym, "D", _expr, barmerge.gaps_off, barmerge.lookahead_off)

f_rsi_from_close(_c) =>
    ta.rsi(_c, rsiLen)

f_recent(_cond, _bars) =>
    if _bars == 0
        _cond
    else
        bs = ta.barssince(_cond)
        not na(bs) and bs <= _bars

// ÂÜ∑Âç¥ÔºöÂêåÊñπÂêëËß¶ÂèëÂêé N bars ÂÜÖ‰∏çÂÖÅËÆ∏ÂÜçËß¶Âèë
f_applyCooldown(_rawSig, _coolBars, _lastBar) =>
    can = na(_lastBar) or (bar_index - _lastBar > _coolBars)
    _rawSig and (_coolBars == 0 or can)

//========================
// Scoring Functions (Ê†∏ÂøÉËØÑÂàÜÈÄªËæë)
//========================
// RSI ËØÑÂàÜ: Â∫ïÈÉ®Ê≠£ÂàÜÔºåÈ°∂ÈÉ®Ë¥üÂàÜ
f_rsiScore(_rsi) =>
    score = 0.0
    if not na(_rsi)
        if _rsi < 30
            score := 2
        else if _rsi < 40
            score := 1
        else if _rsi > 70
            score := -2
        else if _rsi > 60
            score := -1
    score

// FI (50Êó•) ËØÑÂàÜ: Â∫ïÈÉ®Ê†∏ÂøÉÔºåÊùÉÈáç1.5x
// FIË∂ä‰ΩéË∂äÊòØÂ∫ïÈÉ®ÔºåFIË∂äÈ´òÂØπÈ°∂ÈÉ®ÂΩ±ÂìçÂ∞è
f_fiScore(_fi) =>
    score = 0.0
    if not na(_fi)
        if _fi < 25
            score := 3  // ÊûÅÂ∫¶Ë∂ÖÂçñ
        else if _fi < 35
            score := 2
        else if _fi < 45
            score := 1
        else if _fi > 75
            score := -1  // FIÈ´òÂØπÈ°∂ÈÉ®ÂΩ±ÂìçËæÉÂ∞è
    score

// TW (20Êó•) ËØÑÂàÜ: È°∂ÈÉ®Ê†∏ÂøÉÔºåÊùÉÈáç1.5x
// TWË∂äÈ´òË∂äÊòØÈ°∂ÈÉ®ÔºåTWË∂ä‰ΩéÂØπÂ∫ïÈÉ®ÂΩ±ÂìçÂ∞è
f_twScore(_tw) =>
    score = 0.0
    if not na(_tw)
        if _tw > 75
            score := -3  // ÊûÅÂ∫¶Ë∂Ö‰π∞
        else if _tw > 65
            score := -2
        else if _tw > 55
            score := -1
        else if _tw < 35
            score := 1  // TW‰ΩéÂØπÂ∫ïÈÉ®ÂΩ±ÂìçËæÉÂ∞è
    score

// Up/Down Volume ËØÑÂàÜ
f_volScore(_uvol, _dvol) =>
    score = 0.0
    if not na(_uvol) and not na(_dvol) and _dvol > 0
        ratio = _uvol / _dvol
        if ratio < 0.5
            score := 2  // ‰∏ãË∑åÊàê‰∫§Èáè‰∏ªÂØº -> ÂèØËÉΩËßÅÂ∫ï
        else if ratio < 0.8
            score := 1
        else if ratio > 2.0
            score := -2  // ‰∏äÊ∂®Êàê‰∫§Èáè‰∏ªÂØº -> ÂèØËÉΩËßÅÈ°∂
        else if ratio > 1.5
            score := -1
    score

// ÁªºÂêàËØÑÂàÜÂáΩÊï∞
// intradayMode: Êó•ÂÜÖÊ®°ÂºèÂè™Áî® RSI + Volume
f_totalScore(_rsi, _tw, _fi, _uvol, _dvol, _intraday) =>
    rsiS = f_rsiScore(_rsi)
    volS = f_volScore(_uvol, _dvol)
    // Êó•ÂÜÖÊ®°ÂºèË∑≥Ëøá TW/FI (Êó•Á∫øÊï∞ÊçÆ‰∏çÈÄÇÂêàÂ∞èÊó∂Âõæ)
    fiS = _intraday ? 0.0 : f_fiScore(_fi)
    twS = _intraday ? 0.0 : f_twScore(_tw)
    total = rsiS + fiS + twS + volS
    [total, rsiS, fiS, twS, volS]

//========================
// Market data
//========================
[spyO, spyH, spyL, spyC] = f_ohlc(spySym)
[qqqO, qqqH, qqqL, qqqC] = f_ohlc(qqqSym)
[iwmO, iwmH, iwmL, iwmC] = f_ohlc(iwmSym)

spyRSI = f_rsi_from_close(spyC)
qqqRSI = f_rsi_from_close(qqqC)
iwmRSI = f_rsi_from_close(iwmC)

// ÂπøÂ∫¶Êï∞ÊçÆÂßãÁªàÁî®Êó•Á∫ø (only daily data available)
s5tw = f_secDaily(s5twSym, close)
s5fi = f_secDaily(s5fiSym, close)
nctw = f_secDaily(nctwSym, close)
ncfi = f_secDaily(ncfiSym, close)
r2tw = f_secDaily(r2twSym, close)
r2fi = f_secDaily(r2fiSym, close)

// Up/Down Volume ‰πüÁî®Êó•Á∫ø (intraday volume data unreliable for breadth)
uvol = f_secDaily(uvolSym, close)
dvol = f_secDaily(dvolSym, close)
uvolq = f_secDaily(uvolqSym, close)
dvolq = f_secDaily(dvolqSym, close)

//========================
// Calculate Scores per Market
//========================
// SPY ‰ΩøÁî® NYSE Êàê‰∫§Èáè
[spyScore, spyRsiS, spyFiS, spyTwS, spyVolS] = f_totalScore(spyRSI, s5tw, s5fi, uvol, dvol, intradayMode)
// QQQ ‰ΩøÁî® NASDAQ Êàê‰∫§Èáè
[qqqScore, qqqRsiS, qqqFiS, qqqTwS, qqqVolS] = f_totalScore(qqqRSI, nctw, ncfi, uvolq, dvolq, intradayMode)
// IWM ‰ΩøÁî® NYSE Êàê‰∫§Èáè
[iwmScore, iwmRsiS, iwmFiS, iwmTwS, iwmVolS] = f_totalScore(iwmRSI, r2tw, r2fi, uvol, dvol, intradayMode)

//========================
// Signal Generation (Âü∫‰∫éËØÑÂàÜ)
//========================
// SPY signals
spyStrongBot = spyScore >= adjStrongBotThreshold
spyBot = spyScore >= adjBotThreshold and spyScore < adjStrongBotThreshold
spyTop = spyScore <= adjTopThreshold and spyScore > adjStrongTopThreshold
spyStrongTop = spyScore <= adjStrongTopThreshold

spyBotRaw = spyStrongBot or spyBot
spyTopRaw = spyStrongTop or spyTop

// QQQ signals
qqqStrongBot = qqqScore >= adjStrongBotThreshold
qqqBot = qqqScore >= adjBotThreshold and qqqScore < adjStrongBotThreshold
qqqTop = qqqScore <= adjTopThreshold and qqqScore > adjStrongTopThreshold
qqqStrongTop = qqqScore <= adjStrongTopThreshold

qqqBotRaw = qqqStrongBot or qqqBot
qqqTopRaw = qqqStrongTop or qqqTop

// IWM signals
iwmStrongBot = iwmScore >= adjStrongBotThreshold
iwmBot = iwmScore >= adjBotThreshold and iwmScore < adjStrongBotThreshold
iwmTop = iwmScore <= adjTopThreshold and iwmScore > adjStrongTopThreshold
iwmStrongTop = iwmScore <= adjStrongTopThreshold

iwmBotRaw = iwmStrongBot or iwmBot
iwmTopRaw = iwmStrongTop or iwmTop

// Cooldown state
var int spyLastBot = na
var int spyLastTop = na
var int qqqLastBot = na
var int qqqLastTop = na
var int iwmLastBot = na
var int iwmLastTop = na

spyBotTrig = f_applyCooldown(spyBotRaw, cooldownBars, spyLastBot)
spyTopTrig = f_applyCooldown(spyTopRaw, cooldownBars, spyLastTop)
qqqBotTrig = f_applyCooldown(qqqBotRaw, cooldownBars, qqqLastBot)
qqqTopTrig = f_applyCooldown(qqqTopRaw, cooldownBars, qqqLastTop)
iwmBotTrig = f_applyCooldown(iwmBotRaw, cooldownBars, iwmLastBot)
iwmTopTrig = f_applyCooldown(iwmTopRaw, cooldownBars, iwmLastTop)

if spyBotTrig
    spyLastBot := bar_index
if spyTopTrig
    spyLastTop := bar_index
if qqqBotTrig
    qqqLastBot := bar_index
if qqqTopTrig
    qqqLastTop := bar_index
if iwmBotTrig
    iwmLastBot := bar_index
if iwmTopTrig
    iwmLastTop := bar_index

//========================
// Aggregate resonance (edge-triggered)
//========================
spyBotRecent = f_recent(spyBotTrig, confirmBars)
qqqBotRecent = f_recent(qqqBotTrig, confirmBars)
iwmBotRecent = f_recent(iwmBotTrig, confirmBars)

spyTopRecent = f_recent(spyTopTrig, confirmBars)
qqqTopRecent = f_recent(qqqTopTrig, confirmBars)
iwmTopRecent = f_recent(iwmTopTrig, confirmBars)

agreeBot = (spyBotRecent ? 1 : 0) + (qqqBotRecent ? 1 : 0) + (iwmBotRecent ? 1 : 0)
agreeTop = (spyTopRecent ? 1 : 0) + (qqqTopRecent ? 1 : 0) + (iwmTopRecent ? 1 : 0)

aggBottom = agreeBot >= minAgree
aggTop    = agreeTop >= minAgree

aggBottomEdge = aggBottom and not aggBottom[1]
aggTopEdge    = aggTop and not aggTop[1]

//========================
// Plot selection
//========================
currentTicker = ticker.standard(syminfo.tickerid)
isSpy = currentTicker == spySym
isQqq = currentTicker == qqqSym
isIwm = currentTicker == iwmSym

modePlot = plotMode == "AUTO" ? (isSpy ? "SPY" : isQqq ? "QQQ" : isIwm ? "IWM" : "AGG(ÂÖ±ÊåØ)") : plotMode
showSpy = modePlot == "SPY"
showQqq = modePlot == "QQQ"
showIwm = modePlot == "IWM"
showAgg = modePlot == "AGG(ÂÖ±ÊåØ)"

// ÈÄâÊã©ÂΩìÂâçÊòæÁ§∫ÁöÑËØÑÂàÜ
displayScore = showSpy ? spyScore : showQqq ? qqqScore : showIwm ? iwmScore : (spyScore + qqqScore + iwmScore) / 3
displayRsiS = showSpy ? spyRsiS : showQqq ? qqqRsiS : showIwm ? iwmRsiS : (spyRsiS + qqqRsiS + iwmRsiS) / 3
displayFiS = showSpy ? spyFiS : showQqq ? qqqFiS : showIwm ? iwmFiS : (spyFiS + qqqFiS + iwmFiS) / 3
displayTwS = showSpy ? spyTwS : showQqq ? qqqTwS : showIwm ? iwmTwS : (spyTwS + qqqTwS + iwmTwS) / 3
displayVolS = showSpy ? spyVolS : showQqq ? qqqVolS : showIwm ? iwmVolS : (spyVolS + qqqVolS + iwmVolS) / 3

//========================
// Plot shapes (Âå∫ÂàÜÂº∫‰ø°Âè∑/ÊôÆÈÄö‰ø°Âè∑)
// ‰ø°Âè∑ÂõæÊ†áËØ¥Êòé:
// üöÄ = Âº∫Â∫ïÈÉ® (Strong Bottom, Score >= 6)
// üìà = Â∫ïÈÉ® (Bottom, Score >= 4)
// üí• = Âº∫È°∂ÈÉ® (Strong Top, Score <= -6)
// üìâ = È°∂ÈÉ® (Top, Score <= -4)
// üî• = ÂÖ±ÊåØÂ∫ïÈÉ® (Â§öÂ∏ÇÂú∫ÂÖ±ÊåØ)
// ‚ùÑÔ∏è = ÂÖ±ÊåØÈ°∂ÈÉ® (Â§öÂ∏ÇÂú∫ÂÖ±ÊåØ)
//========================
// SPY
plotshape(showSpy and spyBotTrig and spyStrongBot, title="SPY Strong Bottom", style=shape.labelup, location=location.belowbar, color=color.new(color.lime, 0), textcolor=color.black, size=size.normal, text="üöÄ")
plotshape(showSpy and spyBotTrig and spyBot, title="SPY Bottom", style=shape.triangleup, location=location.belowbar, color=color.new(color.lime, 0), size=size.small, text="üìà")
plotshape(showSpy and spyTopTrig and spyStrongTop, title="SPY Strong Top", style=shape.labeldown, location=location.abovebar, color=color.new(color.red, 0), textcolor=color.white, size=size.normal, text="üí•")
plotshape(showSpy and spyTopTrig and spyTop, title="SPY Top", style=shape.triangledown, location=location.abovebar, color=color.new(color.red, 0), size=size.small, text="üìâ")

// QQQ
plotshape(showQqq and qqqBotTrig and qqqStrongBot, title="QQQ Strong Bottom", style=shape.labelup, location=location.belowbar, color=color.new(color.lime, 0), textcolor=color.black, size=size.normal, text="üöÄ")
plotshape(showQqq and qqqBotTrig and qqqBot, title="QQQ Bottom", style=shape.triangleup, location=location.belowbar, color=color.new(color.lime, 0), size=size.small, text="üìà")
plotshape(showQqq and qqqTopTrig and qqqStrongTop, title="QQQ Strong Top", style=shape.labeldown, location=location.abovebar, color=color.new(color.red, 0), textcolor=color.white, size=size.normal, text="üí•")
plotshape(showQqq and qqqTopTrig and qqqTop, title="QQQ Top", style=shape.triangledown, location=location.abovebar, color=color.new(color.red, 0), size=size.small, text="üìâ")

// IWM
plotshape(showIwm and iwmBotTrig and iwmStrongBot, title="IWM Strong Bottom", style=shape.labelup, location=location.belowbar, color=color.new(color.lime, 0), textcolor=color.black, size=size.normal, text="üöÄ")
plotshape(showIwm and iwmBotTrig and iwmBot, title="IWM Bottom", style=shape.triangleup, location=location.belowbar, color=color.new(color.lime, 0), size=size.small, text="üìà")
plotshape(showIwm and iwmTopTrig and iwmStrongTop, title="IWM Strong Top", style=shape.labeldown, location=location.abovebar, color=color.new(color.red, 0), textcolor=color.white, size=size.normal, text="üí•")
plotshape(showIwm and iwmTopTrig and iwmTop, title="IWM Top", style=shape.triangledown, location=location.abovebar, color=color.new(color.red, 0), size=size.small, text="üìâ")

// AGG ÂÖ±ÊåØ
plotshape(showAgg and aggBottomEdge, title="AGG Bottom (Edge)", style=shape.labelup, location=location.belowbar, color=color.new(color.lime, 0), textcolor=color.black, text="üî•")
plotshape(showAgg and aggTopEdge, title="AGG Top (Edge)", style=shape.labeldown, location=location.abovebar, color=color.new(color.red, 0), textcolor=color.white, text="‚ùÑÔ∏è")

//========================
// Dashboard
//========================
if showDashboard and barstate.islast
    var table dashboard = table.new(position.top_right, 3, 6, bgcolor=color.new(color.black, 80), frame_color=color.gray, frame_width=1, border_color=color.gray, border_width=1)
    
    // Header
    table.cell(dashboard, 0, 0, "Factor", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 0, "Score", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 2, 0, "Weight", text_color=color.white, text_size=size.small)
    
    // RSI
    rsiColor = displayRsiS > 0 ? color.lime : displayRsiS < 0 ? color.red : color.gray
    table.cell(dashboard, 0, 1, "RSI", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 1, str.tostring(displayRsiS, "#.#"), text_color=rsiColor, text_size=size.small)
    table.cell(dashboard, 2, 1, "1x", text_color=color.gray, text_size=size.small)
    
    // FI (50D)
    fiColor = displayFiS > 0 ? color.lime : displayFiS < 0 ? color.red : color.gray
    table.cell(dashboard, 0, 2, "FI(50D)", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 2, str.tostring(displayFiS, "#.#"), text_color=fiColor, text_size=size.small)
    table.cell(dashboard, 2, 2, "Bottom", text_color=color.lime, text_size=size.small)
    
    // TW (20D)
    twColor = displayTwS > 0 ? color.lime : displayTwS < 0 ? color.red : color.gray
    table.cell(dashboard, 0, 3, "TW(20D)", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 3, str.tostring(displayTwS, "#.#"), text_color=twColor, text_size=size.small)
    table.cell(dashboard, 2, 3, "Top", text_color=color.red, text_size=size.small)
    
    // Volume
    volColor = displayVolS > 0 ? color.lime : displayVolS < 0 ? color.red : color.gray
    table.cell(dashboard, 0, 4, "Vol", text_color=color.white, text_size=size.small)
    table.cell(dashboard, 1, 4, str.tostring(displayVolS, "#.#"), text_color=volColor, text_size=size.small)
    table.cell(dashboard, 2, 4, "1x", text_color=color.gray, text_size=size.small)
    
    // Total
    totalColor = displayScore >= adjBotThreshold ? color.lime : displayScore <= adjTopThreshold ? color.red : color.gray
    table.cell(dashboard, 0, 5, "Total", text_color=color.white, text_size=size.normal)
    table.cell(dashboard, 1, 5, str.tostring(displayScore, "#.#"), text_color=totalColor, text_size=size.normal)
    signalText = displayScore >= adjStrongBotThreshold ? "STRONG BUY" : displayScore >= adjBotThreshold ? "BUY" : displayScore <= adjStrongTopThreshold ? "STRONG SELL" : displayScore <= adjTopThreshold ? "SELL" : "NEUTRAL"
    table.cell(dashboard, 2, 5, signalText, text_color=totalColor, text_size=size.small)

//========================
// Alerts
//========================
alertcondition(spyBotTrig and spyStrongBot, title="SPY Âº∫Â∫ïÈÉ®", message="SPY Âº∫Â∫ïÈÉ®‰ø°Âè∑ (Score >= 6) - {{ticker}} @ {{time}}")
alertcondition(spyBotTrig, title="SPY Â∫ïÈÉ®", message="SPY Â∫ïÈÉ®‰ø°Âè∑Ëß¶Âèë - {{ticker}} @ {{time}}")
alertcondition(spyTopTrig and spyStrongTop, title="SPY Âº∫È°∂ÈÉ®", message="SPY Âº∫È°∂ÈÉ®‰ø°Âè∑ (Score <= -6) - {{ticker}} @ {{time}}")
alertcondition(spyTopTrig, title="SPY È°∂ÈÉ®", message="SPY È°∂ÈÉ®‰ø°Âè∑Ëß¶Âèë - {{ticker}} @ {{time}}")

alertcondition(qqqBotTrig and qqqStrongBot, title="QQQ Âº∫Â∫ïÈÉ®", message="QQQ Âº∫Â∫ïÈÉ®‰ø°Âè∑ - {{ticker}} @ {{time}}")
alertcondition(qqqBotTrig, title="QQQ Â∫ïÈÉ®", message="QQQ Â∫ïÈÉ®‰ø°Âè∑Ëß¶Âèë - {{ticker}} @ {{time}}")
alertcondition(qqqTopTrig and qqqStrongTop, title="QQQ Âº∫È°∂ÈÉ®", message="QQQ Âº∫È°∂ÈÉ®‰ø°Âè∑ - {{ticker}} @ {{time}}")
alertcondition(qqqTopTrig, title="QQQ È°∂ÈÉ®", message="QQQ È°∂ÈÉ®‰ø°Âè∑Ëß¶Âèë - {{ticker}} @ {{time}}")

alertcondition(iwmBotTrig and iwmStrongBot, title="IWM Âº∫Â∫ïÈÉ®", message="IWM Âº∫Â∫ïÈÉ®‰ø°Âè∑ - {{ticker}} @ {{time}}")
alertcondition(iwmBotTrig, title="IWM Â∫ïÈÉ®", message="IWM Â∫ïÈÉ®‰ø°Âè∑Ëß¶Âèë - {{ticker}} @ {{time}}")
alertcondition(iwmTopTrig and iwmStrongTop, title="IWM Âº∫È°∂ÈÉ®", message="IWM Âº∫È°∂ÈÉ®‰ø°Âè∑ - {{ticker}} @ {{time}}")
alertcondition(iwmTopTrig, title="IWM È°∂ÈÉ®", message="IWM È°∂ÈÉ®‰ø°Âè∑Ëß¶Âèë - {{ticker}} @ {{time}}")

alertcondition(aggBottomEdge, title="ÂÖ±ÊåØÂ∫ïÈÉ®", message="ÂÖ±ÊåØÂ∫ïÈÉ®Ëß¶ÂèëÔºöÂ§öÂ∏ÇÂú∫Âú®Á™óÂè£ÂÜÖÂÖ±ÊåØ - {{ticker}} @ {{time}}")
alertcondition(aggTopEdge, title="ÂÖ±ÊåØÈ°∂ÈÉ®", message="ÂÖ±ÊåØÈ°∂ÈÉ®Ëß¶ÂèëÔºöÂ§öÂ∏ÇÂú∫Âú®Á™óÂè£ÂÜÖÂÖ±ÊåØ - {{ticker}} @ {{time}}")
